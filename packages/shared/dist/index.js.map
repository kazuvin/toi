{"version":3,"sources":["../src/index.ts","../src/schemas/user.ts","../src/schemas/ai/chat.ts","../src/schemas/ai/explain.ts","../src/schemas/ai/translate.ts","../src/schemas/ai/transcribe.ts"],"sourcesContent":["export * from \"./schemas/user\";\nexport * from \"./schemas/ai\";\n","import { z } from \"zod\";\n\nexport const UserSchema = z.object({\n  id: z.string(),\n  email: z.string().email(),\n  name: z.string(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n});\n\nexport type User = z.infer<typeof UserSchema>;\n\n/**\n * ログインユーザー情報レスポンス\n */\nexport const GetLoginUserResponseSchema = z.object({\n  uid: z.string(),\n  email: z.string().nullable(),\n  displayName: z.string(),\n  photoURL: z.string().nullable(),\n  createdAt: z.string().datetime(),\n  updatedAt: z.string().datetime(),\n  userType: z.enum([\"anonymous\", \"registered\"]),\n  subscriptionPlan: z.enum([\"pro\"]).nullable(),\n  subscriptionExpiresAt: z.string().nullable(),\n  isAdmin: z.boolean(),\n});\n\nexport type GetLoginUserResponse = z.infer<typeof GetLoginUserResponseSchema>;\n\n/**\n * ユーザー情報追加リクエスト\n */\nexport const PostUserBodySchema = z.object({\n  uid: z.string(),\n  email: z.string().optional(),\n  displayName: z.string().optional(),\n  photoUrl: z.string().optional(),\n  createdAt: z.string().optional(),\n  updatedAt: z.string().optional(),\n  userType: z.enum([\"ANONYMOUS\", \"REGISTERED\"]),\n  subscriptionPlan: z.enum([\"Pro\"]).optional(),\n  subscriptionExpiresAt: z.string().optional(),\n  isAdmin: z.boolean(),\n});\n\nexport type PostUserBody = z.infer<typeof PostUserBodySchema>;\n","import { z } from \"zod\";\n\n/**\n * メッセージの共通スキーマ\n */\nexport const messageSchema = z.object({\n  role: z.enum([\"user\", \"assistant\"]),\n  content: z.string(),\n  translation: z.string().optional(),\n  feedback: z.string().optional(),\n});\n\n/**\n * メッセージの共通型\n */\nexport type Message = z.infer<typeof messageSchema>;\n\n/**\n * チャットリクエストのスキーマ\n */\nexport const chatRequestSchema = z.object({\n  aiRole: z.string(),\n  userRole: z.string(),\n  situation: z.string(),\n  learningContent: z.string(),\n  messages: z.array(messageSchema).max(2),\n});\n\n/**\n * チャットレスポンスのスキーマ\n */\nexport const chatResponseSchema = messageSchema.extend({\n  role: z.literal(\"assistant\"),\n});\n\n/**\n * チャットリクエストの型\n */\nexport type ChatRequest = z.infer<typeof chatRequestSchema>;\n\n/**\n * チャットレスポンスの型\n */\nexport type ChatResponse = z.infer<typeof chatResponseSchema>;\n","import { z } from \"zod\";\n\nexport const explainExampleSchema = z.object({\n  english: z.string(),\n  japanese: z.string(),\n});\n\nexport const explainRequestSchema = z.object({\n  expression: z.string(),\n  language: z.string().optional(),\n});\n\nexport const explainContentSchema = z.object({\n  translation: z.string(),\n  pronunciation: z.string(),\n  grammar: z.string(),\n  usage: z.string(),\n  examples: z.array(explainExampleSchema),\n});\n\nexport const explainHistoryItemSchema = z.object({\n  id: z.string(),\n  expression: z.string(),\n  explanation: explainContentSchema,\n  createdAt: z.string().nullable(),\n});\n\nexport type ExplainExample = z.infer<typeof explainExampleSchema>;\nexport type ExplainRequestBody = z.infer<typeof explainRequestSchema>;\nexport type ExplainContent = z.infer<typeof explainContentSchema>;\nexport type ExplainHistoryResponse = z.infer<typeof explainHistoryItemSchema>[];\nexport type ExplainResponse = z.infer<typeof explainHistoryItemSchema>;\n","import { z } from \"zod\";\n\nexport const translateRequestSchema = z.object({\n  text: z.string(),\n});\n\nexport const translateResponseSchema = z.string();\n\nexport type TranslateRequestBody = z.infer<typeof translateRequestSchema>;\nexport type TranslateResponse = z.infer<typeof translateResponseSchema>;\n","import { z } from \"zod\";\n\n/**\n * 音声文字起こしリクエスト\n */\nexport const PostTranscribeBodySchema = z.object({\n  // 音声ファイルのバイナリデータをBase64エンコードした文字列\n  audio: z.string(),\n  // 音声ファイルの言語\n  language: z.string().optional(),\n});\n\nexport type PostTranscribeBody = z.infer<typeof PostTranscribeBodySchema>;\n\n/**\n * 音声文字起こしレスポンス\n */\nexport const PostTranscribeResponseSchema = z.object({\n  text: z.string(),\n});\n\nexport type PostTranscribeResponse = z.infer<\n  typeof PostTranscribeResponseSchema\n>;\n"],"mappings":"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","names":["import_zod","import_zod","import_zod","import_zod"]}